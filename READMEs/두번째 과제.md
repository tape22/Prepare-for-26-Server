# Blog ê¸°ëŠ¥ì„ ê°–ì¶˜ ì„œë²„ êµ¬ì¶•í•´ë³´ê¸°
> [2020.02.24 ~ 03.03]ğŸ”Œ

## ğŸ“Œ ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­

npm ì„¤ì¹˜ ë°©ë²• ë° Express í”„ë¡œì íŠ¸ êµ¬ì¡°ì— ëŒ€í•´ í•™ìŠµí•´ì˜¤ê¸° 

<br/>

## â˜ï¸ 1. **ê°„ë‹¨í•œ ë¸”ë¡œê·¸ íŠœí† ë¦¬ì–¼ ë”°ë¼í•˜ê¸°**
- ì°¸ê³  | [Beginner Node JS & Express - Blog Website | All](https://www.youtube.com/watch?v=iONugkYM2rs)

1. terminal ì—°ë‹¤.
2. sudo npm install -g turbo-cli ëª…ë ¹ì–´ ì…ë ¥í•´ì„œ turbo ì„¤ì¹˜í•œë‹¤.
3. turbo version ëª…ë ¹ì–´ ì…ë ¥í•´ì„œ ë²„ì „ í™•ì¸í•´ë³¸ë‹¤. ex) 0.38.1

<img width="850" alt="ìŠ¤í¬ë¦°ìƒ· 2020-03-03 ì˜¤ì „ 12 18 21" src="https://user-images.githubusercontent.com/44978839/75696263-a5b07c00-5cee-11ea-8311-a77584f2ba0d.png">

4. [turbo ì‚¬ì´íŠ¸ ì ‘ì†](https://www.turbo360.co/site/blog-tutorial-mv3m1d)
5. gallery > Developers > turbo360 ê²€ìƒ‰í•´ì„œ ë¸”ë¡œê·¸ íŠœí† ë¦¬ì–¼ í…œí”Œë¦¿ í”„ë¡œì íŠ¸ë¥¼ ì°¾ëŠ”ë‹¤.
6. Download Source í´ë¦­í•œë‹¤.
7. turboì— íšŒì›ê°€ì…ì„ í•œë‹¤. *ì´ë©”ì¼ ì¸ì¦ì€ ë¤*
8. ë‹¤ìš´ë°›ì€ blog-tutorial íŒ¨í‚¤ì§€ë¥¼ í¸í•œ ë””ë ‰í† ë¦¬ë¡œ ì˜®ê²¨ ì••ì¶•ì„ í‘¼ë‹¤.
9. ì••ì¶• í‘¼ íŒŒì¼ë“¤ ì¤‘ì—ì„œ node modules ë¥¼ ì§€ìš´ë‹¤
10. terminal ë¡œ ë‹¤ì‹œ ê°€ì„œ blog-tutorial í”„ë¡œì íŠ¸ í´ë” ì•ˆìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤.
11. ì‚­ì œí•œ dependency ë¥¼ reinstall í•˜ê³  ì‹¶ë‹¤.

> ì—¬ê¸°ì„œ ì ê¹ !
- ì–´ë–¤ dependency ë¥¼ ì„¤ì¹˜í•´ì•¼í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆì„ê¹Œ?
- ë­˜ ë‹¤ìš´ë¡œë“œ ë°›ì•„ì•¼í•  ì§€ physicalí•œ, actualí•œ dependency list ë§ì•¼!
* í™•ì¸í•˜ëŠ” ë°©ë²•ì€ ë°”ë¡œ **package.json** : very important concept

12. VScodeë¡œ blog-tutorial í”„ë¡œì íŠ¸ë¥¼ ì—°ë‹¤.
13. npm installì„ í•˜ë©´ package.json ì—ì„œ dependencies ë¥¼ ì°¾ì•„ ë‹¤ìš´ë¡œë“œí•œë‹¤.
14. npm ì„ ì‹¤í–‰í•˜ë ¤ë©´ ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í•´ì•¼í•˜ë‚˜? ë‹¹ì—°íˆ npm run serve
15. ê·¸ëŸ¼ ì´ì œ localhostì— ì ‘ì†í•˜ë©´ ë˜‘ê°™ì€ í™ˆí˜ì´ì§€ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤!

<img width="850" alt="ìŠ¤í¬ë¦°ìƒ· 2020-03-03 ì˜¤ì „ 12 43 44" src="https://user-images.githubusercontent.com/44978839/75696481-0049d800-5cef-11ea-8c9c-eacad6f547ac.png">

## â˜ï¸ 2. **í”„ë¡œì íŠ¸ êµ¬ì¡° íŒŒì•… ë° ê°œë… í•™ìŠµ**
1. app.jsì˜ ê°€ì¥ ì¤‘ìš”í•œ ì—­í• ì€ routesë‹¤.
> ì—¬ê¸°ì„œ ì ê¹ !
- set routesë¼ëŠ” ì˜ë¯¸ëŠ”?
* routes > page ë“¤ì–´ê°€ë©´ í™ˆí˜ì´ì§€ë¥¼ í•¸ë“¤ë§ í•˜ëŠ” ê²ƒë“¤ì´ ë“¤ì–´ìˆë‹¤.

2. home.mustacheëŠ” ì‹¤ì œ ë°ì´íƒ€ê°€ ë“¤ì–´ìˆëŠ” html í˜•ì‹ì˜ ë°ì´íƒ€ë‹¤. viewsì— ë“¤ì–´ê°€ë©´ ì¡´ì¬í•˜ëŠ”ë°, í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ë Œë”ë§í•˜ëŠ” objectë‹¤.
3. {{<head}} ì´ ë…íŠ¹í•œ í‘œê¸°ë²•ì€? mustache template engine. ë°”ë¡œ partial : to reuse html, ì–´ëŠ í˜ì´ì§€ë¥¼ ë“¤ì–´ê°€ë„ ë°˜ë³µë˜ëŠ” ë¶€ë¶„ì´ë‹¤. ex) í—¤ë” í‘¸í„°
4. {{#posts}} ~ {{/posts}} ì— ìˆëŠ” ì½”ë“œë¥¼ í•œë²ˆ ì¼ì§€ë§Œ 4ë²ˆ ë°˜ë³µí•´ì„œ ë Œë”ë§ë˜ì–´ block ì„ postí•œë‹¤. 5ë²ˆ, 20ë²ˆ, në²ˆ ë°˜ë³µ ê°€ëŠ¥í•˜ë‹¤. (27:00)
5. ì´ ë¶€ë¶„ì´ ì—†ë‹¤ë©´? ë³¸ë¬¸ì´ ì•„ì˜ˆ ì—†ê³ , ì¦‰ ë¸”ë¡œê·¸ì˜ í¬ìŠ¤íŒ… ë¶€ë¶„ì´ ì‚¬ë¼ì§€ê³  í—¤ë”ë§Œ ìˆëŠ” ìƒíƒœê°€ ëœë‹¤.
6. postCtr.get() ëŠ” ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚ ê¹Œ? getting the post from 'sth'. Sth is post. ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ Fetch í•´ì˜¤ëŠ” ë¶€ë¶„ì´ë‹¤.
7. ì´ postsì˜ ì‹¤ì œ ë°ì´íƒ€ëŠ” ì–´ë””ì„œë¶€í„° ì˜¤ëŠ” ê²ƒì¼ê¹Œ? Local database ì´ë‹¤. ex) Mongo
8. ê·¸ë ‡ë‹¤ë©´ postsì˜ dbëŠ” ì–´ë””ì— ìˆì„ê¹Œ? tmp : temporary db íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤. post.db íŒŒì¼ ì•ˆì— ë“¤ì–´ê°€ë³´ë©´ 4ê°œì˜ ë°ì´íƒ€ê°€ ìˆëŠ”ë° ì´ ë°ì´íƒ€ë“¤ì€ JSON object í˜•íƒœì´ë‹¤. Mongo ë°ì´íƒ€ë² ì´ìŠ¤ëŠ” raw JSON í˜•íƒœë¡œ ë°ì´íƒ€ë¥¼ ì €ì¥í•œë‹¤. title, text ì™€ ê°™ì€ ì£¼ìš”í•œ í‚¤ë“¤ë¡œ êµ¬ì„±ëœë‹¤.
9. [JSON formatter](https://jsonformatter.curiousconcept.com) ì‚¬ì´íŠ¸ì— ë“¤ì–´ê°€ì„œ ì´ JSON ì½”ë“œë¥¼ ë³µì‚¬í•œ ë‹¤ìŒì— ìƒì„±í•´ë³´ë©´ formatted ëœ í˜•íƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ê°„ë‹¨í•œ ë¡œì§ìœ¼ë¡œ ë°ì´íƒ€ë¥¼ ì €ì¥í•˜ëŠ” í†µìƒì ì¸ ë°©ë²•ì´ë‹¤.

<img width="850" alt="ìŠ¤í¬ë¦°ìƒ· 2020-03-03 ì˜¤í›„ 8 58 21" src="https://user-images.githubusercontent.com/44978839/75773851-0cd33c80-5d92-11ea-8df4-599a819ba3f1.png">

10. Controllers ì˜ ì»¨ì…‰ì€ ë°ì´íƒ€ë² ì´ìŠ¤ì™€ ì‹¤ì œë¡œ ì†Œí†µí•˜ëŠ” íˆ´ì´ë‹¤. ìš°ë¦¬ëŠ” í•  ìˆ˜ ìˆëŠ” í•œ ìµœëŒ€í•œ M(ë°ì´íƒ€), V(ë·°ì˜ ë¡œì§), C(ì—°ê²°ì)ë¥¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
11. Model : references to the View. models ì— ë“¤ì–´ê°€ë©´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì¸ Post.js ê°€ ìˆëŠ”ë°, ëª¨ë“  attributes ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. ëª¨ë‘ key ê³  JSON í˜•íƒœë¡œ ë˜ì–´ìˆë‹¤. ì¤‘ìš”í•œ ì»¨ì…‰ì€, ë·°ì™€ ê´€ë ¨ëœ reference ê°€ ì ˆëŒ€ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤. ex) html ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ì™€ ê°™ì€ êµ¬ë¬¸ì€ ì¢‹ì§€ ì•Šë‹¤.

```JSON
template: {type : String, default: "home.mustache"} 
``` 

12. afterwards, ë¡œì»¬ ì£¼ì†Œ ë’¤ì— ìˆëŠ” ê²ƒì„ "path" ë¼ê³  ë¶€ë¥´ëŠ”ë°, ì–´ë–¤ ë¼ìš°íŠ¸ê°€ ë¡œì§ì„ í•¸ë“¤ë§í•  ê²ƒì¸ì§€ë¥¼ ê²°ì •í•œë‹¤.

> ì—¬ê¸°ì„œ ì ê¹ !
* nodemon ì„ ì‚¬ìš© ì¤‘ì— ìƒˆë²½ì— ì„œë²„ë¥¼ ëŒë¦¬ê³  ë‚˜ì„œ, ì „ì›ì„ ì¢…ë£Œí–ˆë‹¤ê°€ ë‹¤ì‹œ í”„ë¡œì íŠ¸ë¥¼ npm run serve í•´ë³´ë‹ˆ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.

```
Error: listen EADDRINUSE: address already in use :::3000
```

- ë¡œì»¬ í¬íŠ¸ì—ì„œ ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ë™ì‘í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œë‹¤.

```
$ lsof -i tcp:3000
```

- ì…ë ¥ í›„ í•´ë‹¹ í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë“¤ì„ í™•ì¸í•œë‹¤.

```
COMMAND  PID     USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
node    5981 ttub_nii   22u  IPv6 0xa975cb6f2489cf3f      0t0  TCP *:hbci (LISTEN)
```

- ê°•ì œ ì¢…ë£Œí•  PIDë¥¼ í™•ì¸í•œ í›„ PID ìë¦¬ì— ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•œë‹¤.

```
$ kill -9 5981
```
> ì¶œì²˜ | [nodemon address already ì—ëŸ¬ í•´ê²°í•˜ê¸°](https://soulcactus.netlify.com/development/fix-nodemon/)

13. path ë¶€ë¶„ì„ ì‘ì„±í•  ë•Œ, ê°œê°œì¸ì˜ ë¸”ë¡œê·¸ë¥¼ single path ë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´ êµ‰ì¥íˆ ì–‘ë„ ë§ì„ ê²ƒì´ê³  ë°”ë³´ ê°™ì€ ì§“ì´ë‹¤. ë™ì ìœ¼ë¡œ path ë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤.
14. routes > page.js ë¡œ ëŒì•„ê°€ì„œ /post/:slug ë¶€ë¶„ì„ ë³´ë©´ : ì½œë¡ ì´ ìˆëŠ”ë°, ë’¤ì— ë­ê°€ ì˜¤ë“  ì•„ë¬´ê±°ë‚˜ ë  ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì´ë‹¤. route ì— ì½œë¡ ì´ ì˜¤ë©´, ì´ëŠ” placeholder ê°€ ë˜ê³  ì´ ê°’ì€ requestì˜ parameterë¡œ ì €ì¥ëœë‹¤.  ex) postëŠ” ë°˜ë“œì‹œ post ì—¬ì•¼ í•˜ì§€ë§Œ, ê·¸ ë’¤ì— ì˜¤ëŠ” ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ path ëŠ” ì–´ë–¤ íŠ¹ì •í•œ ë‹¨ì–´ê°€ ì•„ë‹ˆë¼ ì•„ë¬´ê±°ë‚˜ ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì´ë‹¤.

> ì¶œì²˜ | [[Node.js ê°•ì¢Œ] 6. Dynamic web (ë‹¤ì´ë‚˜ë¯¹ ì›¹) ë§Œë“¤ê¸° Route & EJS](https://m.blog.naver.com/PostView.nhn?blogId=azure0777&logNo=220475344428&proxyReferer=https%3A%2F%2Fwww.google.co.kr%2F)

15. console.log ë¡œ slug ë¥¼ ì°ì–´ë³´ë ¤ê³  í•œë‹¤. í„°ë¯¸ë„ì´ ë°”ë¡œ ì½˜ì†”ì¸ë°, ì½˜ì†”ì„ clear í•˜ê³  ë‹¤ì‹œ ì„œë²„ë¥¼ ëŒë ¤ë³´ë©´ ë³´ì´ëŠ” í™ˆí˜ì´ì§€ëŠ” ë˜‘ê°™ì§€ë§Œ ì½˜ì†”ì°½ì— slug ê°€ ì°íˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```javascript
router.get('/post/:slug', (req, res) => {
	const data = req.context
	const slug = req.params.slug // dynamic path pattern
	console.log('SLUG == '+slug) // spit out the text
```

<img width="900" alt="ìŠ¤í¬ë¦°ìƒ· 2020-03-03 ì˜¤í›„ 10 03 19" src="https://user-images.githubusercontent.com/44978839/75778270-d4842c00-5d9a-11ea-8ee0-8818fb487a87.png">
