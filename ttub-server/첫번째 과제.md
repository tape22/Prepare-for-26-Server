# Promise, async, await 알아오기
> [2020.02.20]🔌

## 📌 사전 준비 사항

node.js는 비동기 이벤트 기반 Js 런타임 환경이라는 것을 기억하자.  

<br/>

1. **비동기 프로그래밍**
- 참고 | [[javascript] Promise, async, await](http://junil-hwang.com/blog/javascript-promise-async-await/) - 2019.02.10

javascript는 Event Driven 으로 실행되는 구조를 가지고 있다고 배웠다.  
사용자의 행동에 대해 반응하는 방식으로 작동 되는 것이다.  
즉, 코드가 순차적으로 실행되는 것이 아닌 Event 기반으로 실행 되는 것인데, 이러한 이벤트가 많아질 경우 어떻게 될까?

   ```javascript
    var num = 1
    setTimeout(_ => {
     console.log(`${++num} 번째 setTimeout`)
      setTimeout(_ => {
       console.log(`${++num} 번째 setTimeout`)
        setTimeout(_ => {
         console.log(`${++num} 번째 setTimeout`)
          setTimeout(_ => {
           console.log(`${++num} 번째 setTimeout`)
            setTimeout(_ => {
             console.log(`${++num} 번째 setTimeout`)
              setTimeout(_ => {
               console.log(`${++num} 번째 setTimeout`)
                setTimeout(_ => {
                 console.log(`${++num} 번째 setTimeout`)
                }, 1000)
              }, 1000)
            }, 1000)
          }, 1000)
        }, 1000)
      }, 1000)
    }, 1000)
 ```
 > [출처] http://junil-hwang.com/blog/javascript-promise-async-await/
 
<br/>    

callback 지옥에 빠지게 된다.
코드를 순차적으로 실행 시키기 위해서 이러한 행위를 반복한다.  
callback이 끝난 후 callbak, 다시 callback이 끝난 후 callback ... 반복  

<br/>

2. **이슈 발생: call back 지옥에 빠지게 된다.**

- 비동기 프로그래밍으로 코드를 순차적으로 실행시키기 위해 굉장히 보기 좋지 않은 코드가 만들어진다. 이것을 해결하기 위한 것이 Promise이다.  

    ```javascript
    var num = 0
    var f = function () {
      return new Promise(function (resolve) { // Promise 객체를 반환합니다.
       setTimeout(function () {
          console.log(`${++num} 번째 실행`)
          // setTimeout이 끝나는 시점에서 resolve() 실행
         // resolve는 then에서 인자로 넘겨진 callback 함수
          resolve()
        }, 1000)
      })
    }
    const callback = function () {
     console.log(`then 구문에서 반환하는 function은 resolve가 됩니다.`)
    }
    f().then(callback)
    ```

 > [출처] http://junil-hwang.com/blog/javascript-promise-async-await/
 
 <br/>
 
  - Promise의 실행 순서는 다음과 같습니다.  
    - Promise 객체를 반환합니다.
    - Promise 객체의 인자에는 resolve function과 reject function이 있습니다.
    - Promise 객체에는 then 이라는 method가 있습니다.
    - then은 function을 인자로 받습니다.
    - then에서 넘겨진 function은 promise의 resolve 에서 실행됩니다.
